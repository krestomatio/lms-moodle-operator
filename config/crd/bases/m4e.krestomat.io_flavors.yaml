
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: flavors.m4e.krestomat.io
spec:
  group: m4e.krestomat.io
  names:
    kind: Flavor
    listKind: FlavorList
    plural: flavors
    singular: flavor
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Flavor is the Schema for the flavors API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: FlavorSpec defines the desired state of Flavor
            properties:
              m4eSpec:
                description: M4eSpec defines M4e spec
                properties:
                  moodleConfigAdditionalBlock:
                    description: MoodleConfigAdditionalBlock defines moodle extra
                      block in config.php
                    type: string
                  moodleConfigAdditionalCfg:
                    description: MoodleConfigAdditionalCfg defines moodle extra config
                      properties in config.php
                    type: object
                  moodleCronjobTolerations:
                    description: MoodleCronjobTolerations defines any tolerations
                      for Moodle cronjob pods.
                    items:
                      description: The pod this Toleration is attached to tolerates
                        any taint that matches the triple <key,value,effect> using
                        the matching operator <operator>.
                      properties:
                        effect:
                          description: Effect indicates the taint effect to match.
                            Empty means match all taint effects. When specified, allowed
                            values are NoSchedule, PreferNoSchedule and NoExecute.
                          type: string
                        key:
                          description: Key is the taint key that the toleration applies
                            to. Empty means match all taint keys. If the key is empty,
                            operator must be Exists; this combination means to match
                            all values and all keys.
                          type: string
                        operator:
                          description: Operator represents a key's relationship to
                            the value. Valid operators are Exists and Equal. Defaults
                            to Equal. Exists is equivalent to wildcard for value,
                            so that a pod can tolerate all taints of a particular
                            category.
                          type: string
                        tolerationSeconds:
                          description: TolerationSeconds represents the period of
                            time the toleration (which must be of effect NoExecute,
                            otherwise this field is ignored) tolerates the taint.
                            By default, it is not set, which means tolerate the taint
                            forever (do not evict). Zero and negative values will
                            be treated as 0 (evict immediately) by the system.
                          format: int64
                          type: integer
                        value:
                          description: Value is the taint value the toleration matches
                            to. If the operator is Exists, the value should be empty,
                            otherwise just a regular string.
                          type: string
                      type: object
                    type: array
                  moodleHost:
                    description: MoodleHost defines Moodle host for url
                    maxLength: 100
                    minLength: 2
                    type: string
                  moodleImage:
                    description: MoodleImage defines image for moodle container
                    maxLength: 255
                    type: string
                  moodleNewAdminpassHash:
                    description: MoodleNewAdminPassHash is the bcrypt compatible admin
                      password to set in new instance. Required
                    maxLength: 60
                    minLength: 60
                    pattern: ^\$2[ayb]\$.{56}$
                    type: string
                  moodleNewInstance:
                    description: MoodleNewInstance whether new instance job runs
                    type: boolean
                  moodleNewInstanceAdminmail:
                    description: MoodleNewInstanceAdminMail is the admin email to
                      set in new instance. Required
                    maxLength: 100
                    minLength: 3
                    type: string
                  moodleNewInstanceAdminuser:
                    maxLength: 100
                    minLength: 1
                    type: string
                  moodleNewInstanceAgreeLicense:
                    description: MoodleNewInstanceAgreeLicense whether agree to Moodle
                      license. Required
                    type: boolean
                  moodleNewInstanceFullname:
                    maxLength: 100
                    type: string
                  moodleNewInstanceShortname:
                    maxLength: 100
                    type: string
                  moodleNewInstanceSummary:
                    maxLength: 300
                    type: string
                  moodleProtocol:
                    description: MoodleProtocol whether to use http or https
                    enum:
                    - http
                    - https
                    type: string
                  moodlePvcMoodledataSize:
                    description: MoodlePvcMoodledataSize defines moodledata storage
                      size
                    maxLength: 100
                    minLength: 2
                    type: string
                  moodlePvcMoodledataStorageAccessMode:
                    description: MoodlePvcMoodledataStorageAccessMode defines moodledata
                      storage access modes
                    enum:
                    - ReadWriteOnce
                    - ReadOnlyMany
                    - ReadWriteMany
                    type: string
                  moodlePvcMoodledataStorageClassName:
                    description: MoodlePvcMoodledataStorageClassName defines moodledata
                      storage class
                    maxLength: 63
                    minLength: 2
                    type: string
                  moodleSize:
                    description: MoodleSize defines moodle number of replicas between
                      0 and 255
                    format: int32
                    maximum: 255
                    minimum: 0
                    type: integer
                  moodleTolerations:
                    description: MoodleTolerations defines any tolerations for Moodle
                      pods.
                    items:
                      description: The pod this Toleration is attached to tolerates
                        any taint that matches the triple <key,value,effect> using
                        the matching operator <operator>.
                      properties:
                        effect:
                          description: Effect indicates the taint effect to match.
                            Empty means match all taint effects. When specified, allowed
                            values are NoSchedule, PreferNoSchedule and NoExecute.
                          type: string
                        key:
                          description: Key is the taint key that the toleration applies
                            to. Empty means match all taint keys. If the key is empty,
                            operator must be Exists; this combination means to match
                            all values and all keys.
                          type: string
                        operator:
                          description: Operator represents a key's relationship to
                            the value. Valid operators are Exists and Equal. Defaults
                            to Equal. Exists is equivalent to wildcard for value,
                            so that a pod can tolerate all taints of a particular
                            category.
                          type: string
                        tolerationSeconds:
                          description: TolerationSeconds represents the period of
                            time the toleration (which must be of effect NoExecute,
                            otherwise this field is ignored) tolerates the taint.
                            By default, it is not set, which means tolerate the taint
                            forever (do not evict). Zero and negative values will
                            be treated as 0 (evict immediately) by the system.
                          format: int64
                          type: integer
                        value:
                          description: Value is the taint value the toleration matches
                            to. If the operator is Exists, the value should be empty,
                            otherwise just a regular string.
                          type: string
                      type: object
                    type: array
                  moodleUpdateMajor:
                    description: 'MoodleUpdateMajor whether major updates are automatically
                      applied. Default: false'
                    type: boolean
                  moodleUpdateMinor:
                    description: 'MoodleUpdateMinor whether minor updates are automatically
                      applied. Default: true'
                    type: boolean
                  nginxImage:
                    description: NginxImage defines image for nginx container
                    maxLength: 255
                    type: string
                  nginxIngressAnnotations:
                    description: NginxIngressAnnotations defines nginx annotations
                    type: string
                  nginxSize:
                    description: NginxSize defines nginx number of replicas between
                      0 and 255
                    format: int32
                    maximum: 255
                    minimum: 0
                    type: integer
                  nginxTolerations:
                    description: NginxTolerations defines any tolerations for Nginx
                      pods.
                    items:
                      description: The pod this Toleration is attached to tolerates
                        any taint that matches the triple <key,value,effect> using
                        the matching operator <operator>.
                      properties:
                        effect:
                          description: Effect indicates the taint effect to match.
                            Empty means match all taint effects. When specified, allowed
                            values are NoSchedule, PreferNoSchedule and NoExecute.
                          type: string
                        key:
                          description: Key is the taint key that the toleration applies
                            to. Empty means match all taint keys. If the key is empty,
                            operator must be Exists; this combination means to match
                            all values and all keys.
                          type: string
                        operator:
                          description: Operator represents a key's relationship to
                            the value. Valid operators are Exists and Equal. Defaults
                            to Equal. Exists is equivalent to wildcard for value,
                            so that a pod can tolerate all taints of a particular
                            category.
                          type: string
                        tolerationSeconds:
                          description: TolerationSeconds represents the period of
                            time the toleration (which must be of effect NoExecute,
                            otherwise this field is ignored) tolerates the taint.
                            By default, it is not set, which means tolerate the taint
                            forever (do not evict). Zero and negative values will
                            be treated as 0 (evict immediately) by the system.
                          format: int64
                          type: integer
                        value:
                          description: Value is the taint value the toleration matches
                            to. If the operator is Exists, the value should be empty,
                            otherwise just a regular string.
                          type: string
                      type: object
                    type: array
                  postgresImage:
                    description: PostgresImage defines image for postgres container
                    maxLength: 255
                    type: string
                  postgresPvcDataSize:
                    description: PostgresPvcDataSize defines postgres storage size
                    maxLength: 100
                    minLength: 2
                    type: string
                  postgresPvcDataStorageAccessMode:
                    description: PostgresPvcDataStorageAccessMode defines postgres
                      storage access modes
                    enum:
                    - ReadWriteOnce
                    - ReadOnlyMany
                    - ReadWriteMany
                    type: string
                  postgresPvcDataStorageClassName:
                    description: PostgresPvcDataStorageClassName defines postgres
                      storage class
                    maxLength: 63
                    minLength: 2
                    type: string
                  postgresSize:
                    description: PostgresSize defines postgres number of replicas
                      between 0 and 1
                    format: int32
                    maximum: 1
                    minimum: 0
                    type: integer
                  postgresTolerations:
                    description: PostgresTolerations defines any tolerations for Postgres
                      pods.
                    items:
                      description: The pod this Toleration is attached to tolerates
                        any taint that matches the triple <key,value,effect> using
                        the matching operator <operator>.
                      properties:
                        effect:
                          description: Effect indicates the taint effect to match.
                            Empty means match all taint effects. When specified, allowed
                            values are NoSchedule, PreferNoSchedule and NoExecute.
                          type: string
                        key:
                          description: Key is the taint key that the toleration applies
                            to. Empty means match all taint keys. If the key is empty,
                            operator must be Exists; this combination means to match
                            all values and all keys.
                          type: string
                        operator:
                          description: Operator represents a key's relationship to
                            the value. Valid operators are Exists and Equal. Defaults
                            to Equal. Exists is equivalent to wildcard for value,
                            so that a pod can tolerate all taints of a particular
                            category.
                          type: string
                        tolerationSeconds:
                          description: TolerationSeconds represents the period of
                            time the toleration (which must be of effect NoExecute,
                            otherwise this field is ignored) tolerates the taint.
                            By default, it is not set, which means tolerate the taint
                            forever (do not evict). Zero and negative values will
                            be treated as 0 (evict immediately) by the system.
                          format: int64
                          type: integer
                        value:
                          description: Value is the taint value the toleration matches
                            to. If the operator is Exists, the value should be empty,
                            otherwise just a regular string.
                          type: string
                      type: object
                    type: array
                required:
                - moodleNewAdminpassHash
                - moodleNewInstanceAdminmail
                - moodleNewInstanceAgreeLicense
                type: object
              nfsSpec:
                description: NfsSpec defines NFS Server spec to deploy optionally
                properties:
                  serverExportGroupid:
                    format: int32
                    type: integer
                  serverExportPermissions:
                    pattern: '[0-7]{4}'
                    type: string
                  serverExportUserid:
                    format: int32
                    type: integer
                  serverPvcAutoexpansion:
                    type: boolean
                  serverPvcAutoexpansionCapGib:
                    format: int32
                    type: integer
                  serverPvcAutoexpansionGib:
                    format: int32
                    type: integer
                  serverPvcInitSizeGib:
                    format: int32
                    type: integer
                  serverPvcStorageClassName:
                    maxLength: 255
                    minLength: 1
                    type: string
                type: object
            required:
            - m4eSpec
            type: object
          status:
            description: FlavorStatus defines the observed state of Flavor
            properties:
              nodes:
                description: Sites store the name of the sites which are using this
                  flavor
                items:
                  type: string
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
